<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join Room with QR Code</title>
    <link rel="stylesheet" href="../navbar.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../style.css">
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <a href="../chat_list/" class="back-button">Chats</a>
        <h2>Join Room</h2>
    </nav>

    <main class="content">
        <div id="instructions">
            <h2>Instructions</h2>
            <ol>
                <li>Select a camera from the dropdown below.</li>
                <li>Click "Start Scanning" to activate the camera.</li>
                <li>Point the camera at the QR code to scan it.</li>
                <li>Once scanned, you will be redirected to the room.</li>
                <li>Avoid the front camera.</li>
                <li>Prefer the main (standard) rear camera, not wide-angle.</li>
                <li>If multiple options appear, <b>camera 0</b> is usually the right one.</li>
            </ol>
        </div>

        <div id="camera-selection">
            <label for="camera-list" id="camera-list-label">Select Camera:</label>
            <select id="camera-list" disabled>
                <option value="">Loading cameras...</option>
            </select>
        </div>

        <button onclick="main()" id="start-button">Start Scanning</button>
        <br>
        <div id="scanner-container">
            <video id="video" autoplay playsinline></video>
            <canvas id="canvas"></canvas>
        </div>
        <p id="result">Waiting for QR Code...</p>
    </main>


    <script type="module" src="main.js"></script>
    <script src="../buttafuori.js"></script>
    <script src="../db.js"></script>
    <script src="../api.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.js"></script>
</body>

</html>